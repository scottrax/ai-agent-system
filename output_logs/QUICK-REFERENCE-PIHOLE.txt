================================================================================
PI-HOLE MONITORING - QUICK REFERENCE CARD
================================================================================

YOUR MONITORING SYSTEM IS ACTIVE AND RUNNING

Cron Job: Every 5 minutes
Status: OPERATIONAL
Health: ALL CHECKS PASSING
Pi-hole Service: RUNNING

================================================================================
THREE QUICK COMMANDS
================================================================================

1. CHECK STATUS NOW:
   bash ~/ai-agent-system/check-pihole-monitoring.sh

2. ENABLE EMAIL ALERTS (one-time setup):
   bash ~/ai-agent-system/setup-gmail-password.sh

3. VIEW REAL-TIME LOGS:
   tail -f ~/ai-agent-system/pihole-health.log

================================================================================
ALERT CONFIGURATION NEEDED
================================================================================

Email alerts will NOT send until you set the Gmail App Password.

STEPS:
1. Go to: https://myaccount.google.com/apppasswords
2. Sign in with: jupiterserver45@gmail.com
3. Create password for "Mail" and "Linux"
4. Copy the 16-character password
5. Run: bash ~/ai-agent-system/setup-gmail-password.sh
6. Paste the password when prompted
7. Test email will be sent automatically

TIME NEEDED: 2 minutes

================================================================================
WHAT'S BEING MONITORED
================================================================================

Every 5 minutes, the system checks:

1. Is Pi-hole FTL running? (pihole-FTL service)
2. Is port 53 listening? (DNS port)
3. Can it resolve domains? (dig @127.0.0.1 google.com)
4. Is pi-hole CLI responsive? (pihole status)
5. Is web interface up? (http://localhost/admin/)

If ANY check fails 3 times in a row, you'll get an email.

================================================================================
ALERT EMAILS
================================================================================

From: jupiterserver45@gmail.com
To: skitles1994@gmail.com

Alert includes:
- Which check(s) failed
- When it happened
- Recommended fixes
- System details

Recovery email sent when service returns to normal.

================================================================================
IMPORTANT FILES
================================================================================

Health Check Script:
  ~/ai-agent-system/pihole-health-check.sh

Health Check Log:
  ~/ai-agent-system/pihole-health.log

Email Configuration:
  ~/.msmtprc (secure, permissions 600)

Email Log:
  ~/.msmtp.log

Alert State:
  ~/ai-agent-system/pihole-alert-state

Documentation:
  ~/ai-agent-system/PIHOLE_CRON_SETUP.md
  ~/ai-agent-system/PIHOLE_MONITORING_COMPLETE.txt

================================================================================
COMMON TASKS
================================================================================

View current status:
  systemctl status pihole-FTL.service

View recent logs:
  tail -20 ~/ai-agent-system/pihole-health.log

Test DNS manually:
  dig @127.0.0.1 google.com

Test email manually:
  echo -e "Subject: Test\n\nTest" | msmtp -a gmail skitles1994@gmail.com

Manually run health check:
  bash ~/ai-agent-system/pihole-health-check.sh

View cron job:
  crontab -l | grep pihole

View email configuration:
  grep "from\|user\|host" ~/.msmtprc

Check alert state:
  cat ~/ai-agent-system/pihole-alert-state

View recent cron executions:
  grep CRON /var/log/syslog | grep pihole | tail -10

================================================================================
TROUBLESHOOTING
================================================================================

PROBLEM: No emails being received
FIX: Run setup-gmail-password.sh and check ~/.msmtp.log for errors

PROBLEM: Pi-hole showing as down in alerts
FIX: systemctl status pihole-FTL.service

PROBLEM: DNS not resolving
FIX: dig @127.0.0.1 google.com (for testing)

PROBLEM: Cron job not running
FIX: crontab -l (verify it exists)
FIX: grep CRON /var/log/syslog | tail -20 (check logs)

PROBLEM: Gmail app password needs reset
FIX: bash ~/ai-agent-system/setup-gmail-password.sh

================================================================================
SECURITY REMINDERS
================================================================================

- ~/.msmtprc contains your Gmail app password (permissions 600)
- Never share this file
- Use app passwords, not your main Gmail password
- Can revoke app passwords anytime from Google Account settings

================================================================================
SUPPORT
================================================================================

Full documentation:
  cat ~/ai-agent-system/PIHOLE_CRON_SETUP.md

Complete setup summary:
  cat ~/ai-agent-system/PIHOLE_MONITORING_COMPLETE.txt

Check system status:
  bash ~/ai-agent-system/check-pihole-monitoring.sh

Gmail app password help:
  https://myaccount.google.com/apppasswords

Pi-hole documentation:
  https://docs.pi-hole.net/

================================================================================
CURRENT SYSTEM STATUS
================================================================================

Cron Job: ACTIVE
Check Frequency: Every 5 minutes
Pi-hole Service: RUNNING
DNS Port 53: LISTENING
DNS Resolution: WORKING
Email System: CONFIGURED (password pending)
Health Checks: ALL PASSING
Alert State: OK

================================================================================
NEXT STEP
================================================================================

1. Configure Gmail App Password:
   bash ~/ai-agent-system/setup-gmail-password.sh

2. Verify it works:
   bash ~/ai-agent-system/check-pihole-monitoring.sh

3. Monitor the logs:
   tail -f ~/ai-agent-system/pihole-health.log

Your monitoring system is ready to go!

================================================================================
Generated: 2025-10-19
Last Verified: Pi-hole FTL is RUNNING, all health checks PASSING
================================================================================
